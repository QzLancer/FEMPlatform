#include "FEMTransformerModel.h"

void FEMTransformerModel::setModelName()
{
	modelname = "transformer";
}

void FEMTransformerModel::setDimension()
{
	dimension = DIMENSION::D2PLANE;
}

void FEMTransformerModel::setFile()
{
	meshfile = "../../model/geo/transformer/transformer_3733.mphtxt";
}

void FEMTransformerModel::createElement2Material()
{
	addLinearMaterial("Air", 4 * PI * 1e-7);
	//addLinearMaterial("Soft Iron2", 0.002);
	double* bdata = new double[] {0.000000, 0.010000, 0.020000, 0.030000, 0.040000, 0.050000, 0.060000, 0.070000, 0.080000, 0.090000, 0.100000, 0.110000, 0.120000, 0.130000, 0.140000, 0.150000, 0.160000, 0.170000, 0.180000, 0.190000, 0.200000, 0.210000, 0.220000, 0.230000, 0.240000, 0.250000, 0.260000, 0.270000, 0.280000, 0.290000, 0.300000, 0.310000, 0.320000, 0.330000, 0.340000, 0.350000, 0.360000, 0.370000, 0.380000, 0.390000, 0.400000, 0.410000, 0.420000, 0.430000, 0.440000, 0.450000, 0.460000, 0.470000, 0.480000, 0.490000, 0.500000, 0.510000, 0.520000, 0.530000, 0.540000, 0.550000, 0.560000, 0.570000, 0.580000, 0.590000, 0.600000, 0.610000, 0.620000, 0.630000, 0.640000, 0.650000, 0.660000, 0.670000, 0.680000, 0.690000, 0.700000, 0.710000, 0.720000, 0.730000, 0.740000, 0.750000, 0.760000, 0.770000, 0.780000, 0.790000, 0.800000, 0.810000, 0.820000, 0.830000, 0.840000, 0.850000, 0.860000, 0.870000, 0.880000, 0.890000, 0.900000, 0.910000, 0.920000, 0.930000, 0.940000, 0.950000, 0.960000, 0.970000, 0.980000, 0.990000, 1.000000, 1.010000, 1.020000, 1.030000, 1.040000, 1.050000, 1.060000, 1.070000, 1.080000, 1.090000, 1.100000, 1.110000, 1.120000, 1.130000, 1.140000, 1.150000, 1.160000, 1.170000, 1.180000, 1.190000, 1.200000, 1.210000, 1.220000, 1.230000, 1.240000, 1.250000, 1.260000, 1.270000, 1.280000, 1.290000, 1.300000, 1.310000, 1.320000, 1.330000, 1.340000, 1.350000, 1.360000, 1.370000, 1.380000, 1.390000, 1.400000, 1.410000, 1.420000, 1.430000, 1.440000, 1.450000, 1.460000, 1.470000, 1.480000, 1.490000, 1.500000, 1.510000, 1.520000, 1.530000, 1.540000, 1.550000, 1.560000, 1.570000, 1.580000, 1.590000, 1.600000, 1.610000, 1.620000, 1.630000, 1.640000, 1.650000, 1.660000, 1.670000, 1.680000, 1.690000, 1.700000, 1.710000, 1.720000, 1.730000, 1.740000, 1.750000, 1.760000, 1.770000, 1.780000, 1.790000, 1.800000, 1.810000, 1.820000, 1.830000, 1.840000, 1.850000, 1.860000, 1.870000, 1.880000, 1.890000, 1.900000, 1.910000, 1.920000, 1.930000, 1.940000, 1.950000, 1.960000, 1.970000, 1.980000, 1.990000, 2.000000, 2.010000, 2.020000, 2.030000, 2.040000, 2.050000, 2.060000, 2.070000, 2.080000, 2.090000, 2.100000, 2.110000, 2.120000, 2.130000, 2.140000, 2.150000, 2.160000, 2.170000, 2.180000, 2.190000, 2.200000, 2.210000, 2.220000, 2.230000, 2.240000, 2.250000, 2.260000, 2.270000, 2.280000, 2.290000, 2.300000, 2.310000, 2.320000, 2.330000, 2.340000, 2.350000, 2.360000, 2.370000, 2.380000, 2.390000, 2.400000, 2.410000, 2.420000, 2.430000, 2.440000, 2.450000, 2.460000, 2.470000, 2.480000, 2.490000, 2.500000, 2.510000, 2.520000, 2.530000, 2.540000, 2.550000, 2.560000, 2.570000, 2.580000, 2.590000, 2.600000, 2.610000, 2.620000, 2.630000, 2.640000, 2.650000, 2.660000, 2.670000, 2.680000, 2.690000, 2.700000, 2.710000, 2.720000, 2.730000, 2.740000, 2.750000, 2.760000, 2.770000, 2.780000, 2.790000, 2.800000, 2.810000, 2.820000, 2.830000, 2.840000, 2.850000, 2.860000, 2.870000, 2.880000, 2.890000, 2.900000, 2.910000, 2.920000, 2.930000, 2.940000, 2.950000, 2.960000, 2.970000, 2.980000, 2.990000, 3.000000, 3.010000, 3.020000, 3.030000, 3.040000, 3.050000, 3.060000, 3.070000, 3.080000, 3.090000, 3.100000, 3.110000, 3.120000, 3.130000, 3.140000, 3.150000, 3.160000, 3.170000, 3.180000, 3.190000, 3.200000, 3.210000, 3.220000, 3.230000, 3.240000, 3.250000, 3.260000, 3.270000, 3.280000, 3.290000, 3.300000, 3.310000, 3.320000, 3.330000, 3.340000, 3.350000, 3.360000, 3.370000, 3.380000, 3.390000, 3.400000, 3.410000, 3.420000, 3.430000, 3.440000, 3.450000, 3.460000, 3.470000, 3.480000, 3.490000, 3.500000, 3.510000, 3.520000, 3.530000, 3.540000, 3.550000, 3.560000, 3.570000, 3.580000, 3.590000, 3.600000, 3.610000, 3.620000, 3.630000, 3.640000, 3.650000, 3.660000, 3.670000, 3.680000, 3.690000, 3.700000, 3.710000, 3.720000, 3.730000, 3.740000, 3.750000, 3.760000, 3.770000, 3.780000, 3.790000, 3.800000, 3.810000, 3.820000, 3.830000, 3.840000, 3.850000, 3.860000, 3.870000, 3.880000, 3.890000, 3.900000, 3.910000, 3.920000, 3.930000, 3.940000, 3.950000, 3.960000, 3.970000, 3.980000, 3.990000, 4.000000, 4.010000, 4.020000, 4.030000, 4.040000, 4.050000, 4.060000, 4.070000, 4.080000, 4.090000, 4.100000, 4.110000, 4.120000, 4.130000, 4.140000, 4.150000, 4.160000, 4.170000, 4.180000, 4.190000, 4.200000, 4.210000, 4.220000, 4.230000, 4.240000, 4.250000, 4.260000, 4.270000, 4.280000, 4.290000, 4.300000, 4.310000, 4.320000, 4.330000, 4.340000, 4.350000, 4.360000, 4.370000, 4.380000, 4.390000, 4.400000, 4.410000, 4.420000, 4.430000, 4.440000, 4.450000, 4.460000, 4.470000, 4.480000, 4.490000, 4.500000, 4.510000, 4.520000, 4.530000, 4.540000, 4.550000, 4.560000, 4.570000, 4.580000, 4.590000, 4.600000, 4.610000, 4.620000, 4.630000, 4.640000, 4.650000, 4.660000, 4.670000, 4.680000, 4.690000, 4.700000, 4.710000, 4.720000, 4.730000, 4.740000, 4.750000, 4.760000, 4.770000, 4.780000, 4.790000, 4.800000, 4.810000, 4.820000, 4.830000, 4.840000, 4.850000, 4.860000, 4.870000, 4.880000, 4.890000, 4.900000, 4.910000, 4.920000, 4.930000, 4.940000, 4.950000, 4.960000, 4.970000, 4.980000, 4.990000, 5.000000};

	double* hdata = new double[] {0.000000, 5.000000, 10.000000, 15.000000, 20.000000, 25.000000, 30.000000, 35.000000, 40.000000, 45.000000, 50.000000, 55.000000, 60.000000, 65.000000, 70.000000, 75.000000, 80.000000, 85.000000, 90.000000, 95.000000, 100.000000, 105.000000, 110.000000, 115.000000, 120.000000, 125.000000, 130.000000, 135.000000, 140.000000, 145.000000, 150.000000, 155.000000, 160.000000, 165.000000, 170.000000, 175.000000, 180.000000, 185.000000, 190.000000, 195.000000, 200.000000, 205.000000, 210.000000, 215.000000, 220.000000, 225.000000, 230.000000, 235.000000, 240.000000, 245.000000, 250.000000, 255.000000, 260.000000, 265.000000, 270.000000, 275.000000, 280.000000, 285.000000, 290.000000, 295.000000, 300.000000, 305.003000, 310.024000, 315.081000, 320.192000, 325.375000, 330.648000, 336.029000, 341.536000, 347.187000, 353.000000, 358.993000, 365.184000, 371.591000, 378.232000, 385.125000, 392.288000, 399.739000, 407.496000, 415.577000, 424.000000, 432.783000, 441.944000, 451.501000, 461.472000, 471.875000, 482.728000, 494.049000, 505.856000, 518.167000, 531.000000, 544.373000, 558.304000, 572.811000, 587.912000, 603.625000, 619.968000, 636.959000, 654.616000, 672.957000, 692.000000, 711.763000, 732.264000, 753.521000, 775.552000, 798.375000, 822.008000, 846.469000, 871.776000, 897.947000, 925.000000, 952.953000, 981.824000, 1011.631000, 1042.392000, 1074.125000, 1106.848000, 1140.579000, 1175.336000, 1211.137000, 1248.000000, 1285.943000, 1324.984000, 1365.141000, 1406.432000, 1448.875000, 1492.488000, 1537.289000, 1583.296000, 1630.527000, 1679.000000, 1728.733000, 1779.744000, 1832.051000, 1885.672000, 1940.625000, 1996.928000, 2054.599000, 2113.656000, 2174.117000, 2236.000000, 2299.323000, 2364.104000, 2430.361000, 2498.112000, 2567.375000, 2638.168000, 2710.509000, 2784.416000, 2859.907000, 2937.000000, 3015.713000, 3096.064000, 3178.071000, 3261.752000, 3347.125000, 3434.208000, 3523.019000, 3613.576000, 3705.897000, 3800.000000, 3895.903000, 3993.624000, 4093.181000, 4194.592000, 4297.875000, 4403.048000, 4510.129000, 4619.136000, 4730.087000, 4843.000000, 4957.893000, 5074.784000, 5193.691000, 5314.632000, 5437.625000, 5562.688000, 5689.839000, 5819.096000, 5950.477000, 6084.000000, 6219.683000, 6357.544000, 6497.601000, 6639.872000, 6784.375000, 6931.128000, 7080.149000, 7231.456000, 7385.067000, 7541.000000, 7699.273000, 7859.904000, 8022.911000, 8188.312000, 8356.125000, 8526.368000, 8699.059000, 8874.216000, 9051.857000, 9232.000000, 9414.663000, 9599.864000, 9787.621000, 9977.952000, 10170.875000, 10366.408000, 10564.569000, 10765.376000, 10968.847000, 11175.000000, 11383.853000, 11595.424000, 11809.731000, 12026.792000, 12246.625000, 12469.248000, 12694.679000, 12922.936000, 13154.037000, 13388.000000, 13624.843000, 13864.584000, 14107.241000, 14352.832000, 14601.375000, 14852.888000, 15107.389000, 15364.896000, 15625.427000, 15889.000000, 16155.633000, 16425.344000, 16698.151000, 16974.072000, 17253.125000, 17535.328000, 17820.699000, 18109.256000, 18401.017000, 18696.000000, 18994.223000, 19295.704000, 19600.461000, 19908.512000, 20219.875000, 20534.568000, 20852.609000, 21174.016000, 21498.807000, 21827.000000, 22158.613000, 22493.664000, 22832.171000, 23174.152000, 23519.625000, 23868.608000, 24221.119000, 24577.176000, 24936.797000, 25300.000000, 25666.803000, 26037.224000, 26411.281000, 26788.992000, 27170.375000, 27555.448000, 27944.229000, 28336.736000, 28732.987000, 29133.000000, 29536.793000, 29944.384000, 30355.791000, 30771.032000, 31190.125000, 31613.088000, 32039.939000, 32470.696000, 32905.377000, 33344.000000, 33786.583000, 34233.144000, 34683.701000, 35138.272000, 35596.875000, 36059.528000, 36526.249000, 36997.056000, 37471.967000, 37951.000000, 38434.173000, 38921.504000, 39413.011000, 39908.712000, 40408.625000, 40912.768000, 41421.159000, 41933.816000, 42450.757000, 42972.000000, 43497.563000, 44027.464000, 44561.721000, 45100.352000, 45643.375000, 46190.808000, 46742.669000, 47298.976000, 47859.747000, 48425.000000, 48994.753000, 49569.024000, 50147.831000, 50731.192000, 51319.125000, 51911.648000, 52508.779000, 53110.536000, 53716.937000, 54328.000000, 54943.743000, 55564.184000, 56189.341000, 56819.232000, 57453.875000, 58093.288000, 58737.489000, 59386.496000, 60040.327000, 60699.000000, 61362.533000, 62030.944000, 62704.251000, 63382.472000, 64065.625000, 64753.728000, 65446.799000, 66144.856000, 66847.917000, 67556.000000, 68269.123000, 68987.304000, 69710.561000, 70438.912000, 71172.375000, 71910.968000, 72654.709000, 73403.616000, 74157.707000, 74917.000000, 75681.513000, 76451.264000, 77226.271000, 78006.552000, 78792.125000, 79583.008000, 80379.219000, 81180.776000, 81987.697000, 82800.000000, 83617.703000, 84440.824000, 85269.381000, 86103.392000, 86942.875000, 87787.848000, 88638.329000, 89494.336000, 90355.887000, 91223.000000, 92095.693000, 92973.984000, 93857.891000, 94747.432000, 95642.625000, 96543.488000, 97450.039000, 98362.296000, 99280.277000, 100204.000000, 101133.483000, 102068.744000, 103009.801000, 103956.672000, 104909.375000, 105867.928000, 106832.349000, 107802.656000, 108778.867000, 109761.000000, 110749.073000, 111743.104000, 112743.111000, 113749.112000, 114761.125000, 115779.168000, 116803.259000, 117833.416000, 118869.657000, 119912.000000, 120960.463000, 122015.064000, 123075.821000, 124142.752000, 125215.875000, 126295.208000, 127380.769000, 128472.576000, 129570.647000, 130675.000000, 131785.653000, 132902.624000, 134025.931000, 135155.592000, 136291.625000, 137434.048000, 138582.879000, 139738.136000, 140899.837000, 142068.000000, 143242.643000, 144423.784000, 145611.441000, 146805.632000, 148006.375000, 149213.688000, 150427.589000, 151648.096000, 152875.227000, 154109.000000, 155349.433000, 156596.544000, 157850.351000, 159110.872000, 160378.125000, 161652.128000, 162932.899000, 164220.456000, 165514.817000, 166816.000000, 168124.023000, 169438.904000, 170760.661000, 172089.312000, 173424.875000, 174767.368000, 176116.809000, 177473.216000, 178836.607000, 180207.000000, 181584.413000, 182968.864000, 184360.371000, 185758.952000, 187164.625000, 188577.408000, 189997.319000, 191424.376000, 192858.597000, 194300.000000, 195748.603000, 197204.424000, 198667.481000, 200137.792000, 201615.375000, 203100.248000, 204592.429000, 206091.936000, 207598.787000, 209113.000000, 210634.593000, 212163.584000, 213699.991000, 215243.832000, 216795.125000, 218353.888000, 219920.139000, 221493.896000, 223075.177000, 224664.000000, 226260.383000, 227864.344000, 229475.901000, 231095.072000, 232721.875000, 234356.328000, 235998.449000, 237648.256000, 239305.767000, 240971.000000, 242643.973000, 244324.704000, 246013.211000, 247709.512000, 249413.625000, 251125.568000, 252845.359000, 254573.016000, 256308.557000, 258052.000000};

	addNonlinearMaterial("Soft Iron", 501, bdata, hdata);

	materialmap[1] = materiallist[0];	//ÍâÎ§¿ÕÆø
	materialmap[2] = materiallist[1];	//ÌúÐ¾
	materialmap[3] = materiallist[0];	//ÄÚ²¿×ó²à¿ÕÆø
	materialmap[4] = materiallist[0];	//ÏßÈ¦1×ó²à
	materialmap[5] = materiallist[0];	//ÏßÈ¦2×ó²à
	materialmap[6] = materiallist[0];	//ÄÚ²¿ÓÒ²à¿ÕÆø
	materialmap[7] = materiallist[0];	//ÏßÈ¦1ÓÒ²à
	materialmap[8] = materiallist[0];	//ÏßÈ¦1ÓÒ²à
}

void FEMTransformerModel::bulidGeometry2Load()
{
	loadmap[5] = 1e6;
	loadmap[7] = -1e6;
}

void FEMTransformerModel::buildGeometry2Constrain()
{
	boundarymap[1] = new FEMMagneticInsulation;
	boundarymap[2] = new FEMMagneticInsulation;
	boundarymap[3] = new FEMMagneticInsulation;
	boundarymap[32] = new FEMMagneticInsulation;
}

void FEMTransformerModel::setUnitRatio()
{
	unitratio = 1;
}

void FEMTransformerModel::buildGeometry2Deformed()
{
}

void FEMTransformerModel::buildGeometry2MovingPart()
{
}
